<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <!-- SEO stuff -->
        <!-- / SEO stuff -->

        <title>Simple Composer</title>

        <!-- Libraries -->
        <link rel="stylesheet" href="lib/stylesheets/bootstrap.min.css">
        <link rel="stylesheet" href="lib/stylesheets/fontawesome-free-5.10.1-all.min.css">
        <script src="lib/scripts/jquery-3.4.1.min.js"></script>
        <script src="lib/scripts/popper-v1.16.0.min.js"></script>
        <script src="lib/scripts/bootstrap-v4-4-1.min.js"></script>
        <script src="lib/scripts/tone.js"></script>
        <script src="lib/scripts/cookienotice.min.js"></script>
        <script src="lib/scripts/jquery-ui-v1.12.1.min.js"></script>

        <!-- Stylesheets -->
        <link rel="shortcut icon" href="images/icon.png" type="image/x-icon">
        <link rel="stylesheet" href="stylesheets/index.css">
    </head>
    <body>

        <div class="container-fluid">

            <!-- Settings button -->
            <!--
            <button id="settings_btn" title="Settings" class="btn text-right pb-1 pt-1 pl-1 pr-1" data-toggle="modal" data-target="#settings-modal">
                <i class="fas fa-cog"></i>
            </button>
            -->

            <!-- Settings modal -->
            <div id="settings-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal_label" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modal_label">Settings</h5>
                        <button title="Cancel" type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <br>
                        <!-- Settings -->
                        
                        <div class="form-inline">
                            <input data-setting="labels_on_keys" class="form-control mr-2" type="checkbox">
                            <label >Note name labels on keys</label>
                        </div>

                        <br>
                    </div>
                    <div class="modal-footer">
                        <button id="settings_apply_btn" type="button" class="btn btn-primary" data-dismiss="modal">Apply &amp; Save</button>
                        <button title="Cancel" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    </div>
                    </div>
                </div>
            </div>
            <!-- / Settings modal -->

            <!-- Title -->
            <h1 class="title text-center font-weight-bold pr-2 pl-2 pb-1 pt-4"><i class="fas fa-music" style="color: var(--primary-color);"></i> Simple Composer</h1>

            <div id="key-box">
                <h2 class="subtitle font-weight-bold">Key</h2>
    
                <div id="key_keyboard" class="keyboard"></div>
    
                <br>

                <div class="row mb-3">
    
                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="key_base_note" class="mr-3">Base note</label>
        
                            <select id="key_base_note" class="form-control">
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                    </div>
    
                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="key_mode_input" class="mr-3">Mode</label>
    
                            <select id="key_mode_input" class="form-control">
                                <option value="Ionian">Ionian (Major)</option>
                                <option value="Dorian">Dorian</option>
                                <option value="Phrygian">Phrygian</option>
                                <option value="Lydian">Lydian</option>
                                <option value="Mixolydian">Mixolydian</option>
                                <option value="Aeolian">Aeolian (Natural minor)</option>
                                <option value="Lorcrian">Lorcrian</option>
                            </select>
                        </div>
                    </div>
    
                    <dov class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="key_octave_input" class="mr-3">Octave</label>
    
                            <button id="key_octave_plus_btn" class="btn btn-outline-secondary btn-sm">+</button>
                            <button id="key_octave_minus_btn" class="btn btn-outline-secondary btn-sm">-</button>
                            <input id="key_octave_input" type="text" class="form-control mr-1 ml-1" maxlength="1" size="1" placeholder="..">
                        </div>
                    </dov>
    
                </div>

                <p>Notes of the scale: <span id="scale_notes_string"></span></p>       
    
                <br>
                
                <a id="what-key-to-choose-btn" href="#" class="font-weight-bold">What key should I choose?</a>
                
                <br>
    
                <div id="key-char-box">
                    <h2 class="subtitle font-weight-bold">Affective Musical Key Characteristics</h2>
                            
                    <p class="font-weight-bold">C Major</p>
                    <p>Completely Pure. Its character is: innocence, simplicity, naïvety, children's talk.</p>

                    <p class="font-weight-bold">C Minor</p>
                    <p>Declaration of love and at the same time the lament of unhappy love. All languishing, longing, sighing of the love-sick soul lies in this key.</p>

                    <p class="font-weight-bold">D♭ Major</p>
                    <p>A leering key, degenerating into grief and rapture. It cannot laugh, but it can smile; it cannot howl, but it can at least grimace its crying.--Consequently only unusual characters and feelings can be brought out in this key.</p>

                    <p class="font-weight-bold">C# Minor</p>
                    <p>Penitential lamentation, intimate conversation with God, the friend and help-meet of life; sighs of disappointed friendship and love lie in its radius.</p>

                    <p class="font-weight-bold">D Major</p>
                    <p>The key of triumph, of Hallejuahs, of war-cries, of victory-rejoicing. Thus, the inviting symphonies, the marches, holiday songs and heaven-rejoicing choruses are set in this key.</p>

                    <p class="font-weight-bold">D Minor</p>
                    <p>Melancholy womanliness, the spleen and humours brood.</p>

                    <p class="font-weight-bold">E♭ Major</p>
                    <p>The key of love, of devotion, of intimate conversation with God.</p>

                    <p class="font-weight-bold">D# Minor</p>
                    <p>Feelings of the anxiety of the soul's deepest distress, of brooding despair, of blackest depresssion, of the most gloomy condition of the soul. Every fear, every hesitation of the shuddering heart, breathes out of horrible D# minor. If ghosts could speak, their speech would approximate this key.</p>

                    <p class="font-weight-bold">E Major</p>
                    <p>Noisy shouts of joy, laughing pleasure and not yet complete, full delight lies in E Major.</p>

                    <p class="font-weight-bold">E minor</p>
                    <p>Naïve, womanly innocent declaration of love, lament without grumbling; sighs accompanied by few tears; this key speaks of the imminent hope of resolving in the pure happiness of C major.</p>

                    <p class="font-weight-bold">F Major</p>
                    <p>Complaisance & Calm.</p>

                    <p class="font-weight-bold">F Minor</p>
                    <p>Deep depression, funereal lament, groans of misery and longing for the grave.</p>

                    <p class="font-weight-bold">F# Major</p>
                    <p>Triumph over difficulty, free sigh of relief utered when hurdles are surmounted; echo of a soul which has fiercely struggled and finally conquered lies in all uses of this key.</p>

                    <p class="font-weight-bold">F# Minor</p>
                    <p>A gloomy key: it tugs at passion as a dog biting a dress. Resentment and discontent are its language.</p>

                    <p class="font-weight-bold">G Major</p>
                    <p>Everything rustic, idyllic and lyrical, every calm and satisfied passion, every tender gratitude for true friendship and faithful love,--in a word every gentle and peaceful emotion of the heart is correctly expressed by this key.</p>

                    <p class="font-weight-bold">G Minor</p>
                    <p>Discontent, uneasiness, worry about a failed scheme; bad-tempered gnashing of teeth; in a word: resentment and dislike.</p>

                    <p class="font-weight-bold">A♭ Major</p>
                    <p>Key of the grave. Death, grave, putrefaction, judgment, eternity lie in its radius.</p>

                    <p class="font-weight-bold">A♭ Minor</p>
                    <p>Grumbler, heart squeezed until it suffocates; wailing lament, difficult struggle; in a word, the color of this key is everything struggling with difficulty.</p>

                    <p class="font-weight-bold">A Major</p>
                    <p>This key includes declarations of innocent love, satisfaction with one's state of affairs; hope of seeing one's beloved again when parting; youthful cheerfulness and trust in God.</p>

                    <p class="font-weight-bold">A minor</p>
                    <p>Pious womanliness and tenderness of character.</p>

                    <p class="font-weight-bold">B♭ Major</p>
                    <p>Cheerful love, clear conscience, hope aspiration for a better world.</p>

                    <p class="font-weight-bold">B♭ minor</p>
                    <p>A quaint creature, often dressed in the garment of night. It is somewhat surly and very seldom takes on a pleasant countenance. Mocking God and the world; discontented with itself and with everything; preparation for suicide sounds in this key.</p>

                    <p class="font-weight-bold">B Major</p>
                    <p>Strongly coloured, announcing wild passions, composed from the most glaring coulors. Anger, rage, jealousy, fury, despair and every burden of the heart lies in its sphere.</p>

                    <p class="font-weight-bold">B Minor</p>
                    <p>This is as it were the key of patience, of calm awaiting ones's fate and of submission to divine dispensation.</p>
                            
                    <p class="small text-muted">
                        From: <a href="https://www.wmich.edu/mus-theo/courses/keys.html">https://www.wmich.edu/mus-theo/courses/keys.html</a>
                    </p>
                </div>
    
            </div>
            <!-- / Key box -->

            <br>

            <!-- Chords box -->
            <div id="chords-box">
                <h2 class="subtitle font-weight-bold">Chords</h2>
                <div id="chords_keyboard" class="keyboard"></div>
                
                <br>

                <h3 class="subsubtitle">Current chord</h3>

                <div class="row mb-3">
                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="current_chord_chord_base_note_input" class="mr-3">Base note</label>
        
                            <select id="current_chord_chord_base_note_input" class="form-control">
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="current_chord_chord_type_input" class="mr-3">Type</label>

                            <select id="current_chord_chord_type_input" class="form-control">
                                <option value="M">Major</option>
                                <option value="m">Minor</option>
                                <option value="dim">Diminished</option>
                                <option value="aug">Augmented</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="current_chord_chord_inversion_input" class="mr-3">Inversion</label>

                            <select id="current_chord_chord_inversion_input" class="form-control">
                                <option value="0">None</option>
                                <option value="1">First</option>
                                <option value="2">Second</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <button id="chords_chord_input_add_btn" class="btn btn-block btn-primary" title="Add the current chord to the chord progression list">
                                <i class="fas fa-plus"></i>
                                Add to progression
                            </button>
                            <button id="current_chord_play_btn" class="btn btn-block btn-secondary" title="Play the current chord">
                                <i class="far fa-play-circle"></i>
                                Play
                            </button>
                        </div>
                    </div>

                </div>

                <br>

                <h3 class="subsubtitle">Chord progression</h3> 

                <br>

                <div class="row">

                    <div class="col-sm">
                        <div class="form-inline">
                            <button id="chord_progression_play_btn" class="btn btn-primary mr-1" title="Play the current chord progression">
                                <i class="far fa-play-circle"></i>
                                Play
                            </button>
                            <button id="chord_progression_save_btn" class="btn btn-secondary mr-1" title="Save the current chord progression">
                                <i class="far fa-save"></i>
                                Save
                            </button>
                            <button id="chord_progression_clear_btn" class="btn btn-danger mr-1" title="Remove all chords from progression">
                                <i class="fas fa-trash-alt"></i>
                                Clear
                            </button>
                        </div>
                    </div>

                    <div class="col-sm">
                        <div class="form-inline mt-3">
                            <label for="current_chord_progression_pattern_input" class="mr-1">Pattern</label>
                            <input id="current_chord_progression_pattern_input" class="form-control ml-2" type="text" size="30" placeholder="Roman numerals separated by comma">
                            <button id="current_chord_progression_pattern_btn" class="btn btn-primary btn-sm ml-1 mt-1" title="Load the chord progression in the selected key">
                                Apply
                            </button>
                        </div>
                    </div>

                </div>

                <br>

                <ol id="chords-list" class="mb-5">
                    <i class="text-muted">Chords will appear here ...</i>
                </ol>

                <br>

                <h3 class="subsubtitle">Chord functions</h3>

                <div class="row text-center">
                    <div class="col-sm">
                        <img id="chord_functions_img" class="img mb-1" src="images/help/Functional-Harmony-Chart-Major.png" alt="Chord functions chart">
                        <p class="text-muted small">Image source: <a href="https://www.artofcomposing.com/08-diatonic-harmony">https://www.artofcomposing.com/08-diatonic-harmony</a></p>
                    </div>
                </div>

                <br>
            </div>
            <!-- / Chords box -->

            <!-- Metronome box -->
            <div id="metronome-box">
                <h2 class="subtitle font-weight-bold">Metronome</h2>

                <div class="form-inline mb-3">
                    <div class="form-group">
                        <label for="metronome_bpm_input" class="mr-3" placeholder="BPM">BPM</label>

                        <button id="metronome_bpm_plus_btn" class="btn btn-outline-secondary btn-sm">+</button>
                        <button id="metronome_bpm_minus_btn" class="btn btn-outline-secondary btn-sm">-</button>
                        <input id="metronome_bpm_input" type="text" class="form-control mr-1 ml-1" maxlength="3" size="3" placeholder="BPM">
                    </div>
                </div>

                <button id="metronome_start_btn" class="btn btn-primary">
                    <i class="far fa-play-circle"></i>
                    Start
                </button>
                <button id="metronome_tap_btn" class="btn btn-secondary">
                    <i class="far fa-hand-point-up"></i>
                    Tap
                </button>
            </div>
            <!-- / Metronome box -->

            <br>
        
            <footer class="text-muted small">
                Made by <a href="https://martinkondor.github.io/">Martin Kondor</a>
                <br>
                Contact: <a href="mailto:martinkondor@gmail.com">martinkondor@gmail.com</a>
                <br>
                Contribute: <a href="https://github.com/MartinKondor/SimpleComposer">https://github.com/MartinKondor/SimpleComposer</a>
                <br>
                Copyright &copy; Martin Kondor <span id="copyright_year"></span>
            </footer>
        </div>

        <!-- Scripts -->
        <script src="scripts/Chord.js"></script>
        <script src="scripts/index.js"></script>

    </body>
</html>
